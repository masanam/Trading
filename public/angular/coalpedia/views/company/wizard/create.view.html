<section  ng-controller="CompanyController">
  <div ng-include="'/angular/coalpedia/views/company/wizard/_progress.partial.html'" class="visible-lg"></div>

  <div class="box box-info">
    <div class="box-header with-border">
      <h1 class="box-title" style="font-size: 25px">CREATE {{ companyType | uppercase }}</h1>
      <div class="box-tools pull-right">
        <a class="btn btn-success" ui-sref="company.wizard.connection({ id: selected.company.id })" ng-if="selected.company">
          <i class="glyphicon glyphicon-arrow-right"></i> Next
        </a>
      </div>
    </div>
    
    <div class="box-body">
      <section>
        <form role="form">
          <div class="form-group">
            <label ng-show="error" class="alert bg-red" style="width:100%">{{error}}</label>
          </div>

          <div class="select-box" ng-init="find()">
            <label for="id">Name of Company :</label>
            
            <ui-select ng-model="selected.company"
              reset-search-input="false"
              style="min-width: 300px;"
              title="Choose an address">
              <ui-select-match placeholder="Name of the Company...">{{$select.selected.company_name}}</ui-select-match>

              <ui-select-choices repeat="company in companies track by $index"
                refresh="find($select.search)"
                refresh-delay="1">
                <div ng-bind-html="company.company_name  | highlight: $select.search | html"></div>
              </ui-select-choices>
            </ui-select>
          </div>
        </form>

        <br>

        <section ng-if="!selected.company">
          <div class="text-center col-md-4 col-md-offset-4">
            OR
          </div>
          <br>
          <br>
          <button type="button" class="btn btn-primary btn-block" ng-click="modalCreate()">
            <b>+</b> Add New Company
          </button>
        </section>
        <br>

        <div class="box box-primary" ng-show="selected.company">
          <div class="box-header">
            <h3 class="box-title" style="font-size: 25px">{{ selected.company.company_name }}</h3>

            <span class="pull-right">
              <i class="fa fa-times" ng-click="selected.company = undefined"></i>
            </span>
          </div>
          <div class="box-body box-profile">
            <img class="profile-user-img img-responsive img-circle" src="/images/default.jpg">

            <h3 class="profile-username text-center">{{selected.company.address}}</h3>

            <ul class="list-group list-group-unbordered">
              <li class="list-group-item">
                <b>Customer Category</b>
                <span class="badge" ng-show="selected.company.is_trader===1"><i class='fa fa-share-alt'></i> TRADER</span>
                <span class="badge" ng-show="selected.company.is_trader===0"><i class='fa fa-share-alt'></i> END USER</span>
              </li>
              <li class="list-group-item">
                <b>Customer status </b>
                <span class="badge" ng-show="selected.company.is_affiliated===1"><i class='fa fa-tags'></i> AFFILIATED</span>
                <span class="badge" ng-show="selected.company.is_affiliated===0"><i class='fa fa-tags'></i> NON - AFFILIATED</span>
              </li>
              <li class="list-group-item">
                <b>Phone</b> <span class="pull-right">{{selected.company.phone}}</span>
              </li>
              <li class="list-group-item">
                <b>Email</b> <span class="pull-right">{{selected.company.email}}</span>
              </li>
              <li class="list-group-item">
                <b>Web</b> <span class="pull-right">{{selected.company.web}}</span>
              </li>
              <li class="list-group-item">
                <b>City</b> <span class="pull-right">{{selected.company.city}}</span>
              </li>
              <li class="list-group-item">
                <b>Country</b> <span class="pull-right">{{selected.company.country}}</span>
              </li>
              <li class="list-group-item">
                <b>Industry</b> <span class="pull-right">{{selected.company.industry}}</span>
              </li>
              <li class="list-group-item" ng-if="company.company_type === 'c'">
                <b>Annual Demand</b> <span class="pull-right">{{selected.company.annual_demand}} <span class='badge'>Million Ton</span></span>
              </li>
              <li class="list-group-item" ng-if="company.company_type === 's' || company.company_type === 't'">
                <b>Annual Sales</b> <span class="pull-right">{{selected.company.annual_sales}} <span class='badge'>Million USD</span></span>
              </li>
              <li class="list-group-item" ng-if="company.company_type === 's' || company.company_type === 't'">
                <b>Purchasing Countries</b> <span class="pull-right">{{selected.company.purchasing_countries}}</span>
              </li>
              <li class="list-group-item" ng-if="company.company_type !== 'v'">
                <b>Shipping Term</b> <span class="pull-right">{{selected.company.preferred_trading_term}} {{selected.company.preferred_trading_term_detail}}</span>
              </li>
              <li class="list-group-item" ng-if="company.company_type !== 'v'">
                <b>Payment Term</b> <span class="pull-right">{{selected.company.preferred_payment_term}}</span>
              </li>
              <li class="list-group-item">
                <b>Description</b> <span class="pull-right">{{selected.company.description}}</span>
              </li>
            </ul>


          </div>
          <!-- /.box-body -->
        </div>
      </section>
    </div>
  </div>
</section>
<div ng-controller="IndexTodayController" ng-init="find(); findPrices(); findLastPrices();">
	<div class="box-header">
		<h1 class="box-title">Add Index Price Today</h1>
	</div>
	<div class="box-body">		
		<div class="col-lg-12">
			<form name="pricesForm" class="form-horizontal" ng-submit="submit()">
				<fieldset>
				
				<div class="form-group col-sm-12 show-errors>
				    <label for="date">Date</label>
				    <input readonly name="date" type="date" ng-change="findPrices()" ng-model="prices.date" id="date" class="form-control" required>
				</div>

				<div class="col-sm-3">
				<h4>Daily</h4>
				<div class="form-group" class="col-sm-4" ng-repeat="index in indices | filter:{frequency : 'd'}" show-errors>
					<label for="price">{{ index.index_provider }} {{ index.index_name }} (${{ lastprices.value[index.id] }} updated at {{ lastprices.date[index.id] | date:'yyyy-MM-dd' }})</label>
				    <input name="price" type="number" step="any" ng-model="prices.value[index.id]"
				    	id="price" class="form-control" placeholder="Ex: 5000 ">
				</div>
				</div>
				<div class="col-sm-1">
				</div>
				<div class="col-sm-3">
				<h4>Weekly</h4>
				<div class="form-group" ng-repeat="index in indices | filter:{frequency : 'w'}" show-errors>
					<label for="price">{{ index.index_provider }} {{ index.index_name }} (${{ lastprices.value[index.id] }} updated at {{ lastprices.date[index.id] | date:'yyyy-MM-dd' }})</label>
				    <input name="price" type="number" step="any" ng-model="prices.value[index.id]"
				    	id="price" class="form-control" placeholder="Ex: 5000 ">
				</div>
				</div>
				<div class="col-sm-1">
				</div>
				<div class="col-sm-3">
				<h4>Monthly</h4>
				<div class="form-group" ng-repeat="index in indices | filter:{frequency : 'm'}" show-errors>
					<label for="price">{{ index.index_provider }} {{ index.index_name }} (${{ lastprices.value[index.id] }} updated at {{ lastprices.date[index.id] | date:'yyyy-MM-dd' }})</label>
				    <input name="price" type="number" step="any" ng-model="prices.value[index.id]"
				    	id="price" class="form-control" placeholder="Ex: 5000 ">
				</div>
				</div>


				<hr>
				<div class="col-sm-12">
				<div class="pull-right">
				    <input type="submit" class="btn btn-default">
				</div>
				</div>
				<div ng-show="error" class="text-danger">
					<strong>{{ error.message }}</strong>
				</div>
				</fieldset>
			</form>
		</div>
	</div>
	<div class="callout callout-success" ng-if="successDate">
		You have succesfully added price for {{ successDate }}!
	</div>
</div>
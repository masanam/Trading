<section class="content" ng-controller="BuyOrderFactoryController">
<div class="box box-info">
  <div class="box-header with-border">
    <h1 class="box-title" style="font-size: 25px">Sell Lead Factory</h1>
    <div class="box-tools pull-right">
      <button type="button" class="btn btn-primary" ui-sref="buy-order.step-customer({ order_id:order_id })">
        <i class="glyphicon glyphicon-arrow-left"></i> Back
      </button>
     
      <button type="button" class="btn btn-success" ng-click="nextToProduct()">
        <i class="glyphicon glyphicon-arrow-right"></i> Next
      </button>
    </div>
  </div>
  <div class="box-body">
    <div class="form-group">
      <label ng-show="error" class="alert bg-red" style="width:100%">{{error}}</label>
    </div>
    <div class="select-box" ng-controller="SelectFactoryController" ng-init="findMyFactorys()">
      <label for="id">Name of Factory :</label>
      <ui-select ng-model="factory.selected" style="min-width: 300px;" title="Choose a Factory" append-to-body="true">
        <ui-select-match placeholder="Name Of Factory">{{ factory.selected.factory_name }}</ui-select-match>
        <ui-select-choices repeat="factory in factorys | propsFilter: {factory_name: $select.search}">
          <div ng-bind-html="factory_name | highlight: $select.search"></div>
          <small>
            {{factory.factory_name}}
          </small>
        </ui-select-choices>
      </ui-select>
    </div>

    </br>

    <div class="text-center col-md-4 col-md-offset-4">
        OR
    </div>
      </br>
      </br>
      <button type="button" class="btn btn-primary btn-block" ng-click="openModal()">
        <b>+</b> Add New Factory
      </button>
  </div>
  <div class="box box-primary" ng-show="factory.selected">
    <div class="box-body box-profile">
      <img class="profile-user-img img-responsive img-circle" src="/images/default.jpg"" alt="User profile picture">

      <div class="form-group">
        <label for="factory_name">Name of Factory*:</label>
        <input type="text" class="form-control" id="factory_name" ng-model="factory.selected.factory_name" required disabled>
      </div>

      <div class="form-group">
        <label for="reserves">Owner*:</label>
        <input type="text" class="form-control" id="owner" ng-model="factory.selected.owner" required disabled>
      </div>

      <div class="form-group">
        <label for="reserves">Address*:</label>
        <input type="text" class="form-control" id="address" ng-model="factory.selected.address" required>
      </div>

      <div class="form-group">
        <div class="input-group col-md-12" style="margin-bottom: 5px;">
          <span class="input-group-addon" style="width: 200px;">City*</span>
          <input type="text" class="form-control" placeholder="City" ng-model="factory.selected.city" required>
          <span class="input-group-addon" style="width: 200px;">Country*</span>
          <input type="text" class="form-control" placeholder="Country" ng-model="factory.selected.country" required>
        </div>
        <div class="input-group col-md-12" style="margin-bottom: 5px;">
          <span class="input-group-addon" style="width: 200px;">Latitude</span>
          <input type="number" min="-90" max="90" step="any" class="form-control" placeholder="Latitude" ng-model="factory.selected.latitude" required>
          <span class="input-group-addon" style="width: 200px;">Longitude</span>
          <input type="number" min="-180" max="180" step="any" class="form-control" placeholder="Longitude" ng-model="factory.selected.longitude" required>
        </div>
        <div class="form-group">
        <div class="row" style="background:#eee; padding: 10px; margin-left:10px;">
        <ng-map zoom="2" center="Indonesia" default-style="false" style="width:100%; height:500px;">
          <marker draggable="true" on-mouseup="markerMove()" position="{{factory.latitude}}, {{factory.longitude}}" id="mark{{factory.id}}" ></marker>
        </ng-map>
        </div>
        </div>
        
      </div>

      <div class="form-group">
        <label for="consumption">Consumption:</label>
        <input type="number" min="0" step="any" class="form-control" id="consumption" ng-model="factory.selected.consumption" disabled>
      </div>

      <div class="form-group">
        <label for="size">Size of Factory (Ha):</label>
        <input type="number" min="0" class="form-control" id="size" ng-model="factory.selected.size" disabled>
      </div>

    </div>
  </div>
</div>
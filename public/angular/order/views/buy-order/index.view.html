<section class="content" ng-controller="BuyOrderController">
  <div class="box">
    <div class="box-header with-border">
      <h1 class="box-title" style="font-size: 25px">Buy Leads</h1>
      <div class="box-tools pull-right">
        <button ui-sref="buy-order.create" class="col-md-12 btn btn-primary">+ Create New</button>
      </div>
    </div>
    <div class="box-body">
      <table ng-init="findBuyOrder()" st-table="displayedCollection" st-safe-src="buy_orders" class="table table-striped">
        <thead>
          <tr>
            <th colspan="11"><input st-search="" class="form-control" placeholder="global search ..." type="text"/></th>
          </tr>
          <tr>
            <th st-sort="id">#</th>
            <th st-sort="user.name">PIC</th>
            <th st-sort="order_date">Start Date</th>
            <th st-sort="buyer.company_name">Company</th>
            <th st-sort="product_name">Quality</th>
            <th st-sort="volume">Quantity</th>
            <th st-sort="order_deadline">Schedule</th>
            <th st-sort="max_price">Price / Tones</th>
            <th st-sort="address">Location</th>
            <th st-sort="order_status">Status</th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          <tr ng-repeat="buy_order in displayedCollection">
            <td>{{ buy_order.id }}</td>
            <td>{{ buy_order.user.name }}</td>
            <td>{{ buy_order.order_date | date : 'd MMMM yyyy' }}</td>
            <td>{{ buy_order.buyer.company_name }}</td>
            <td>{{ buy_order.product_name }}</td>
            <td>{{ buy_order.volume }}</td>
            <td>{{ buy_order.order_deadline | date : 'd MMMM yyyy' }}</td>
            <td>{{ buy_order.max_price | currency : $ : 2}}</td>
            <td>{{ buy_order.address }}</td>
            <td ng-if="buy_order.order_status==='o'">Open</td>
            <td ng-if="buy_order.order_status==='s'">Staged</td>
            <td ng-if="buy_order.order_status==='l'">Lead</td>
            <td ng-if="buy_order.order_status==='p'">Partial</td>
            <td ng-if="buy_order.order_status==='0'"><a style="cursor:pointer" ng-click="toCustomer(buy_order.id)">Step Customer</a></td>
            <td ng-if="buy_order.order_status==='1'"><a style="cursor:pointer" ng-click="toFactory(buy_order.buyer_id,buy_order.id)">Step Factory</a></td>
            <td ng-if="buy_order.order_status==='2'"><a style="cursor:pointer" ng-click="toProduct(buy_order.buyer_id,buy_order.id,buy_order.factory_id)">Step Product</a></td>
            <td ng-if="buy_order.order_status==='3'"><a style="cursor:pointer" ng-click="toPort(buy_order.buyer_id,buy_order.id,buy_order.factory_id)">Step Port</a></td>
            <td ng-if="buy_order.order_status==='4'"><a style="cursor:pointer" ng-click="toSummary(buy_order.buyer_id,buy_order.id,buy_order.factory_id)">Step Summary</a></td>
            <td>
              <a ui-sref="buy-order.view({ id: buy_order.id })"><i class="glyphicon glyphicon-info-sign"></i></a>
              <a ng-if="buy_order.order_status!=='s'&&buy_order.order_status!=='o'&&buy_order.order_status!=='p'" ng-click="changeOrderStatus(buy_order, 'x')" style="cursor: pointer" uib-tooltip="Delete Order"    ><i class="glyphicon glyphicon-trash"></i></a>
            </td>
          </tr>
          <tr ng-if="displayedCollection.length == 0">
            <td colspan="11" class="text-center">No data available</td>
          </tr>
        </tbody>

        <tfoot>
          <tr>
            <td colspan="11" class="text-center">
              <div st-pagination="" st-items-by-page="10" st-displayed-pages="5"></div>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</section>
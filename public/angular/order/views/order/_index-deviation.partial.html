<section ng-controller="OrderIndexController">
	<div class="box-header with-divider">
		Price Comparision
		<span uib-dropdown class="pull-right" ng-init="getIndices()">
      <button type="button" class="btn btn-default" uib-dropdown-toggle>
        {{ display.index.index_provider }} {{ display.index.index_name }} <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
        <li role="menuitem" ng-repeat="index in indices"><a ng-click="render(display.index = index)">
		  		{{ index.index_provider }} {{ index.index_name }}
        </a></li>
      </ul>
    </span>
	</div>
	<div class="box-body">
		<div class="col-xs-2 description-block border-right">
  		<p>BUY PRICE</p>
  		<h3>$ {{ (display.sell.min_price + order.pit_to_port + order.transhipment) | number:2 }}</h3>
  		<small class="text-muted">deviation: {{ ((display.sell.min_price + order.pit_to_port + order.transhipment)/display.index.price)*100 | number:2 }}%</small>
  	</div>
		<div ng-hide=" display.totalSellPrice === 0 || display.totalBuyPrice === 0 " class="col-xs-2 description-block border-right">
  		<p>{{ display.index.index_provider }} {{ display.index.index_name }}</p>
  		<h3>$ {{ display.index.price | number:2 }}</h3>
  		<small class="text-muted">{{ display.index.date | date }}</small>
  	</div>
		<div class="col-xs-2 description-block border-right">
  		<p>SELL PRICE</p>
  		<h3>$ {{ (display.buy.max_price - order.port_to_factory - order.freight_cost) | number:2 }}</h3>
  		<small class="text-muted">deviation: {{ ((display.buy.max_price - order.port_to_factory - order.freight_cost)/display.index.price)*100 | number:2 }}%</small>
  	</div>
		<div class="col-xs-6 description-block" id="lineChart">
      <canvas id="line" class="chart chart-line" chart-data="data" chart-dataset-override="datasetOverride"
        chart-labels="labels" chart-series="series" chart-colors="colors" style="min-height:200px;">
      </canvas> 
  	</div>
	</div>
</section>
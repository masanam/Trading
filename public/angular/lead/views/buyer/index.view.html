<section class="content">
<div class="col-md-3 col-lg-2">
  <section ng-include="'./angular/lead/views/side-menu.view.html'"></section>
</div>
<div class="col-md-9 col-lg-10" ng-controller="BuyerController">
  <section ng-include="'./angular/lead/views/search-bar.view.html'"></section>
  <div class="box box-info">
    <div class="box-header with-border">
      <h1 class="box-title" style="font-size: 25px">Buyers</h1>
      <div class="box-tools pull-right">
        <button ui-sref="lead.create-buyer" class="btn btn-primary">+ Create New </button>
      </div>
    </div>
    <div class="box-body">
      <table st-table="displayedCollection" st-safe-src="buyers" class="table table-striped" ng-init="find()">
        <thead>
          <tr>
            <th colspan="7"><input st-search="" class="form-control" placeholder="global search ..." type="text"/></th>
          </tr>
          <tr>
              <th st-sort="id">#</th>
              <th st-sort="company_name">Company</th>
              <th st-sort="phone">Phone</th>
              <th st-sort="email">Email</th>
              <th st-sort="buy_order[0].order_date">Last Buy Order Date</th>
              <th st-sort=""></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="(idx, buyer) in displayedCollection">
            <td>{{ buyer.id }}</td>
            <td>{{ buyer.company_name }}</td>
            <td>{{ buyer.phone }}</td>
            <td>{{ buyer.email }}</td>
            <td>
              <span ng-if="buyer.buy_order">{{ buyer.buy_order[0].order_date | convertToDate | date : 'd MMMM yy' }}</span>
              <span ng-if="!buyer.buy_order">N/A</span>
            </td>
            <td>
              <a ui-sref="lead.view-buyer({ id: buyer.id })"><i class="glyphicon glyphicon-info-sign"></i></a>
              <a ui-sref="lead.update-buyer({ id: buyer.id })"><i class="glyphicon glyphicon-pencil"></i></a>
              <a ng-click="delete(buyer)"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
          </tr>
          <tr ng-if="displayedCollection.length == 0">
            <td colspan="6" class="text-center">No data available</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="7" class="text-center">
              <div st-pagination="" st-items-by-page="10" st-displayed-pages="5"></div>
            </td>
          </tr>
        </tfoot>
      </table>
      
    </div>
  </div>
</div>
</section>
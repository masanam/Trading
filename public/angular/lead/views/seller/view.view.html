<div class="content" ng-controller="SellerController" ng-init="findOne()">
  <!-- HEADER -->
  <div class="row submenu-header">
    <div class="submenu-header-item">
      <button type="button" class="btn btn-primary" ui-sref="lead.seller">
        <i class="glyphicon glyphicon-arrow-left"></i> Back
      </button>
    </div>
    <div class="submenu-header-item">
      <h4>{{ $stateParams.type }} Profile</h4>
    </div>
  </div>

  <!-- PRIMARY DETAIL -->
  <div class="box box-widget widget-user">
            <!-- Add the bg color to the header using any of the bg-* classes -->
      <div class="widget-user-header bg-aqua-active">
        <h3 class="widget-user-username">{{ seller.company_name }}</h3>
        <h5 class="widget-user-desc">{{ seller.industry }}</h5>
      </div>
      <div class="box-tools pull-right">
         <span class="badge" ng-if="seller.is_affiliated==0"><i class='fa fa-share-alt'></i> NON-AFFILIATED</span>
        <span class="badge" ng-if="seller.is_affiliated==1"><i class='fa fa-share-alt'></i> AFFILIATED</span>
        <span class="badge" ng-if="seller.is_trader==0"><i class='fa fa-tags'></i> MINER</span>
        <span class="badge" ng-if="seller.is_trader==1"><i class='fa fa-tags'></i> TRADER</span>
      </div>
      <div class="widget-user-image">
        <img class="img-circle" src="/images/default.jpg" alt="User Avatar">
      </div>

      <div class="box-footer">
        <div class="row">
          <div class="col-sm-12 border-right">
            <div class="description-block">
              <h5 class="description-text">{{ seller.address }}</h5>
                  
            </div>
          </div> 
        </div>
      </div>
  </div>

  <div style="margin-top:10px;">
    <div class="col-lg-4">
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">About</h3>
          <div class="box-tools pull-right">
            <button type="button" ui-sref="lead.update-seller({ id: seller.id })" class="btn btn-info"><i class="glyphicon glyphicon-pencil"></i> Update</button>
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">

            <table class="table table-striped">
              <tr><td>Country:</td><td>{{ seller.country }}</td></tr>
              <tr><td>Address:</td><td>{{ seller.address }}</td></tr>
              <tr><td>City:</td><td>{{ seller.city }}</td></tr>
              <tr><td>Latitude:</td><td>{{ seller.latitude }}</td></tr>
              <tr><td>Longitude:</td><td>{{ seller.longitude }}</td></tr>
              <tr><td>Industry:</td><td>{{ seller.industry }}</td></tr>
              <tr><td>License Type:</td><td>{{ seller.license_type }}</td></tr>
              <tr><td>License Expiry Date:</td><td>{{ seller.license_expiry_date }}</td></tr>
              <tr><td>Total Annual Sales:</td><td>{{ seller.total_annual_sales }} <span class='badge badger-danger'>Million USD</span></td></tr>
              <tr><td>Preferred Trading Term:</td><td>{{ seller.preferred_trading_term }}</td></tr>
              <tr><td>Preferred Payment Term:</td><td>{{ seller.preferred_payment_term }}</td></tr>
              <tr><td>Purchasing Countries:</td><td>{{ seller.purchasing_countries }}</td></tr>  
              <tr><td>Phone:</td><td>{{ seller.phone }}</td></tr>
              <tr><td>Email:</td><td>{{ seller.email }}</td></tr>
              <tr><td>Web:</td><td>{{ seller.web }}</td></tr>
              <tr><td>Desc:</td><td>{{ seller.description }}</td></tr>
              <tr ng-if="buyer.status == 'a'"><td>Status:</td> <td>Active</td></tr>
              <tr ng-if="buyer.status == 'x'"><td>Status:</td> <td>Deactivated</td></tr>

            </table>
            <!--ng-map center="{{seller.longitude}}, {{seller.latitude}}">
              <marker position="{{seller.longitude}}, {{seller.latitude}}"></marker>
            </ng-map-->
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">Contacts</h3>
          <div class="box-tools pull-right">
            <button type="button" class="btn btn-info" ng-click="addContact()"><i class="glyphicon glyphicon-plus"></i> Add New Contact</button>
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">

            <ul class="list-group">
              <li class="list-group-item" ng-repeat="contact in seller.contact">
                {{ contact.name }}
                <i class="glyphicon glyphicon-envelope" style="margin-left: 50px;"></i> {{ contact.email }}
                <i class="glyphicon glyphicon-earphone" style="margin-left: 50px;"></i> {{ contact.phone }}

                <span class="pull-right">
                   <a href="#" ng-click="deleteContact(contact)"><i class="glyphicon glyphicon-remove"></i></a>
                </span>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">Products</h3>
          <div class="box-tools pull-right">
            <button type="button" ng-click="addProductDetail()" class="btn btn-info"><i class="glyphicon glyphicon-plus"></i> Add New Product</button>
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Name</th>
                  <th><i class="glyphicon glyphicon-scale"></i> GCV ADB (kcal)</th>
                  <th><i class="glyphicon glyphicon-scale"></i> GCV ARB (kcal)</th>
                  <th><i class="glyphicon glyphicon-scale"></i> NCV (kcal)</th>
                  <th><!--span class="pull-right">
                    <a ui-sref="lead.view-product({ id: product.id })"><i class="glyphicon glyphicon-eye-open"></i></a>
                    <a href="#" ng-click="deleteProduct(product)"><i class="glyphicon glyphicon-remove"></i></a>
                  </span--></th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="product in seller.product">
                  <td>{{ product.product_name }}</td>
                  <td>{{ product.gcv_adb_min | number }} - {{ product.gcv_adb_max | number }}</td>
                  <td>{{ product.gcv_arb_min | number }} - {{ product.gcv_arb_max | number }}</td>
                  <td>{{ product.ncv_min | number }} - {{ product.ncv_max | number }}</td>
                  <td><span class="pull-right">
                    <a ui-sref="lead.view-product({ id: product.id })"><i class="glyphicon glyphicon-eye-open"></i></a>
                    <a href="#" ng-click="deleteProduct(product)"><i class="glyphicon glyphicon-remove"></i></a>
                  </span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">Concessions</h3>
          <div class="box-tools pull-right">
            <button type="button" class="btn btn-info" ng-click="addConcession()"><i class="glyphicon glyphicon-plus"></i> Add New Concessions</button>
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">
          
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Name</th>
                  <th><i class="glyphicon glyphicon-map-marker"></i> Location</th>
                  <th><i class="glyphicon glyphicon-scale"></i> Reserves (tonnes)</th>
                  <th><!--span class="pull-right">
                    <a ui-sref="lead.view-product({ id: product.id })"><i class="glyphicon glyphicon-eye-open"></i></a>
                    <a href="#" ng-click="deleteProduct(product)"><i class="glyphicon glyphicon-remove"></i></a>
                  </span--></th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="concession in seller.concession">
                  <td>{{ concession.concession_name }}</td>
                  <td>{{ concession.longitude | number }}, {{ concession.latitude | number }} (Port: {{ concession.port_name || 'N/A' }})</td>
                  <td>{{ concession.reserves | number }}</td>
                  <td><span class="pull-right">
                    <a ui-sref="lead.view-concession({ id: concession.id })"><i class="glyphicon glyphicon-eye-open"></i></a>
                    <span class="pull-right">
                      <a href="#" ng-click="deleteConcession(concession)"><i class="glyphicon glyphicon-remove"></i></a>
                    </span>
                  </span></td>
                </tr>
              </tbody>
            </table>

            <!--ul class="list-group">
              <li class="list-group-item" ng-repeat="concession in seller.concession">
                {{ concession.concession_name }}
                <i class="glyphicon glyphicon-map-marker" style="margin-left: 50px;"></i>
                  {{ concession.longitude | number }}, {{ concession.latitude | number }} (Port: {{ concession.port_name || 'N/A' }})
                <i class="glyphicon glyphicon-scale" style="margin-left: 50px;"></i> {{ concession.reserves | number }} tones
                <span class="pull-right">
                  <a href="#" ng-click="deleteConcession(concession)"><i class="glyphicon glyphicon-remove"></i></a>
                </span>
              </li>
            </ul-->
          </div>
        </div>
      </div>

      <!--<div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">Order History</h3>
          <div class="box-tools pull-right">
            <button type="button" class="btn btn-success" ui-sref="sell-order.create"><i class="glyphicon glyphicon-plus"></i> Add New Order</button>
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">
            <table class="table table-striped">
              <thead>
                  <tr>
                      <th>#</th>
                      <th>Last Order Date</th>
                      <th>Volume</th>
                  </tr>
              </thead>
              <tbody>
                  <tr ng-repeat="(idx, lastOrder) in lastOrders">
                      <td>{{ lastOrder.id }}</td>
                      <td>
                        {{ lastOrder.created_at | date:'medium' }}
                      </td>
                      <td>
                        {{ lastOrder.volume | number }}
                      </td>
                  </tr>
                  <tr ng-hide="lastOrders.length > 0">
                    <td colspan="3">There is no previous orders.</td>
                  </tr>
                  <!--tr>
                    <td colspan="3">-- FEATURES COMING SOON --</td>
                  </tr-->
                  <!--<tr>
                    <td colspan="3"><a class="btn btn-block btn-blue" ng-click="goToLastOrders(seller.id)">View More</a></td>
                  </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>-->
      <!--div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">Notes</h3>
          <div class="box-tools pull-right">
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">
            -- FEATURES COMING SOON --
          </div>
        </div>
      </div-->
      
      <div class="box box-info" ng-controller="PortController" ng-init="init()">
        <div class="box-header with-border">
          <h3 class="box-title" style="font-size: 25px">Ports</h3>
          <div class="box-tools pull-right">
            <button type="button" ng-click="openModalDetailSeller()" class="btn btn-info"><i class="glyphicon glyphicon-plus"></i> Add New Ports</button>
          </div>
        </div>
        <div class="box-body">
          <div class="row" style="margin: 10px;">
            <table class="table table-striped" ng-init="findMyPortsSeller()">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Location</th>
                  <th>Status</th>
                  <th>Size (Ha)</th>
                  <th><!----></th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="port in ports">
                  <td>{{ port.port.port_name }}</td>
                  <td>{{ port.port.location }}</td>
                  <td ng-show="port.port.is_private===1">Private</td>
                  <td ng-show="port.port.is_private===0">Public</td>
                  <td>{{ port.port.size }}</td>
                  <td><span class="pull-right">
                    
                    <!--<button type="button" ng-click="viewProduct({ id: product.id })" class="btn btn-info"><i class="glyphicon glyphicon-eye-open"></i></button>-->
                    <a ui-sref="lead.view-port({ id: id, portId: port.port.id })"><i class="glyphicon glyphicon-eye-open"></i></a>
                    <a ng-click="delete(port.port, 'x', 'seller')" style="cursor:pointer"><i class="glyphicon glyphicon-remove"></i></a>
                  </span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script type="text/ng-template" id="alertModal.html">
  <div class="modal-header">
    <h3 class="modal-title" id="modal-title">Submit Failed!</h3>
  </div>
  <div class="modal-body" id="modal-body">
    <p>{{error}}</p>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" type="button" ng-click="close()">OK</button>
  </div>
</script>
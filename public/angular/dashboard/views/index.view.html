<section ng-controller="IndexPriceController" class="content">
  <div class="col-lg-2">
    <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">Filters</h3>
      </div>
      <div class="box-body">
        <div class="with-border">
          <label>Frequency</label>
          <div class="btn-group">
            <label class="btn btn-default" ng-model="frequency" uib-btn-radio="'daily'" uib-tooltip="Daily">D</label>
            <label class="btn btn-default" ng-model="frequency" uib-btn-radio="'weekly'" uib-tooltip="Weekly">W</label>
            <label class="btn btn-default" ng-model="frequency" uib-btn-radio="'monthly'" uib-tooltip="Monthly">M</label>
          </div>
        </div>

        <div class="with-border">
          <label>Date Start</label>
          <p class="input-group">
            <input type="date" class="form-control" ng-model="dateStart" max="{{ dateEnd | date:'yyyy-MM-dd' }}">
          </p>
        </div>

        <div class="with-border">
          <label>Date End</label>
          <p class="input-group">
            <input type="date" class="form-control" ng-model="dateEnd" min="{{ dateStart | date:'yyyy-MM-dd' }}">
          </p>
        </div>

        <div class="with-border">
          <label>Indices</label>

          <div ng-init="getIndices()">
            <div class="btn-group-vertical">
              <label class="btn btn-default" ng-model="index.choosen" ng-repeat="index in indices track by $index" uib-btn-checkbox>
                {{ index.index_provider }} - {{ index.index_name }}
              </label>
            </div>
          </div>
        </div>

        <button class="btn btn-primary" ng-click="getIndexPrices()">Apply Filter</button>
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="box box-info">
      <div class="box-header with-border">
        <h3 class="box-title">Indices</h3>
      </div>
      <div class="box-body no-padding">
        {{choosenIndices}}

        <table st-table="displayedCollection" st-safe-src="orders" class="table table-striped">
          <thead>
            <tr>
              <th>Date</th>
              <th>INDEX</th>
            </tr>
          </thead>

          <tbody>
            <tr ng-repeat="indexPrice in indexPrices">
              <td>Date</td>
              <td>INDEX PRICE</td>
            </tr>
          </tbody>
        </table>

        <div ng-if="!indexPrices" class="box-body">Choose at least 1 index to start</div>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="box box-primary">
      <div class="box-header with-border">
        <h3 class="box-title">Indices Comparison</h3>
      </div>
      <div class="box-body">
        <canvas id="line" class="chart chart-line" chart-data="data"
          chart-labels="labels" chart-series="series" chart-options="options"
          chart-dataset-override="datasetOverride" chart-click="onClick">
        </canvas> 
      </div>
    </div>

    <div class="box box-primary">
      <div class="box-header with-border">
        <h3 class="box-title">Yearly Review: {{ index }}</h3>
      </div>
      <div class="box-body">
        <canvas id="line" class="chart chart-line" chart-data="data"
          chart-labels="labels" chart-series="series" chart-options="options"
          chart-dataset-override="datasetOverride" chart-click="onClick">
        </canvas> 
      </div>
    </div>
  </div>
</section>